<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>kvm虚拟机常用命令</title>
      <link href="/2018/03/08/kvm/"/>
      <content type="html"><![CDATA[<p>KVM虚拟化之命令行管理虚拟机</p><h3 id="vrish命令"><a href="#vrish命令" class="headerlink" title="vrish命令"></a>vrish命令</h3><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td>virsh</td><td>进入KVM交互操作</td></tr><tr><td>virsh nodeinfo</td><td>查看物理机 信息</td></tr><tr><td>virsh list / virsh list –all</td><td>查看虚拟机列表</td></tr><tr><td>virsh dominfo 虚拟机名</td><td>查看指定虚拟机信息</td></tr><tr><td>virsh start 虚拟机名</td><td>开启指定虚拟机 </td></tr><tr><td>virsh destroy 虚拟机名</td><td>强制关闭虚拟机</td></tr><tr><td>virsh shutdown 虚拟机名</td><td>关机虚拟机</td></tr><tr><td>virsh autostart 虚拟机名</td><td>开机自启指定虚拟机</td></tr><tr><td>virsh autostart –disable 虚拟机名</td><td>取消指定虚拟机到开机自启</td></tr><tr><td>virsh dumpxml 虚拟机名</td><td>查看指定虚拟机的配置文件</td></tr><tr><td>virsh define 配置文件</td><td>从指定文件导入一台虚拟机</td></tr><tr><td>virsh undefine 虚拟机名</td><td>移除一台虚拟机，但不删除虚拟机的磁盘文件 </td></tr><tr><td>virsh edit 虚拟名</td><td>编辑一台虚拟机配置，在修改title和uuid的情况下重新生成新的虚拟机</td></tr></tbody></table><p><strong>UUID生成工具</strong><br><code>uuidgen</code></p><h3 id="kvm虚拟机配置文件"><a href="#kvm虚拟机配置文件" class="headerlink" title="kvm虚拟机配置文件"></a>kvm虚拟机配置文件</h3><p><code>/etc/libvirt/qemu/虚拟机名.xml</code></p><h3 id="调整虚拟机设置"><a href="#调整虚拟机设置" class="headerlink" title="调整虚拟机设置"></a>调整虚拟机设置</h3><ol><li><p>导出虚拟机配置<br><code>virsh dumpxml 虚拟机名 &gt; /dirname/filename</code></p></li><li><p>修改导出后的配置<br><code>vim /dirname/filename</code></p></li><li><p>导入修改后的配置文件<br><code>virsh define /dirname/filename</code> </p></li></ol><h4 id="改名虚拟机rh6-n1为rhel6-node1"><a href="#改名虚拟机rh6-n1为rhel6-node1" class="headerlink" title="改名虚拟机rh6_n1为rhel6_node1"></a>改名虚拟机rh6_n1为rhel6_node1</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">virsh dumpxml rhel_n1 &gt; /root/new.xml</span><br><span class="line">vim /root/new.xml</span><br><span class="line">virsh define /root/new.xml</span><br><span class="line">virsh undefine rh6_n1</span><br></pre></td></tr></table></figure><h4 id="复制虚拟机rhel6-node1"><a href="#复制虚拟机rhel6-node1" class="headerlink" title="复制虚拟机rhel6_node1"></a>复制虚拟机rhel6_node1</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">virsh dumpxml rhel6_node1 &gt; /root/copy.xml</span><br><span class="line">vim /root/copy.xml</span><br><span class="line">cd /data/images</span><br><span class="line">cp node1.img node2.img</span><br><span class="line">virsh define /root/copy.xml</span><br></pre></td></tr></table></figure><h3 id="kvm虚拟机操作"><a href="#kvm虚拟机操作" class="headerlink" title="kvm虚拟机操作"></a>kvm虚拟机操作</h3><p><code>virsh edit 虚拟机</code><br><code>virt-clone -o 已有虚拟机名 -n 新虚拟机名 -f 克隆的虚拟机磁盘文件</code><br><code>virsh net-edit 网卡名</code><br><code>virsh net-destroy 网卡名</code><br><code>virsh net-start 网卡名</code></p><h3 id="虚拟机磁盘类型"><a href="#虚拟机磁盘类型" class="headerlink" title="虚拟机磁盘类型"></a>虚拟机磁盘类型</h3><ul><li>raw 原始类型</li><li>qcow2 </li></ul><h4 id="qcow磁盘操作"><a href="#qcow磁盘操作" class="headerlink" title="qcow磁盘操作"></a>qcow磁盘操作</h4><ul><li><code>qemu-img create -f qcow2 /data/images/disk1.img 100G</code></li></ul><h4 id="转换虚拟机磁盘类型"><a href="#转换虚拟机磁盘类型" class="headerlink" title="转换虚拟机磁盘类型"></a>转换虚拟机磁盘类型</h4><ol><li><p>转换磁盘文件类型<br><code>qemu-img convert -O qcow2 -c /data/images/node2.img /data/images/node2.qcow2</code></p></li><li><p>修改虚拟机配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">virsh edit rhel6_node2</span><br><span class="line">    &lt;disk type=&apos;file&apos; device=&apos;disk&apos;&gt;</span><br><span class="line">      &lt;driver name=&apos;qemu&apos; type=&apos;qcow2&apos; cache=&apos;none&apos;/&gt;     //更改type的raw为qcow2</span><br><span class="line">      &lt;source file=&apos;/data/images/node2.qcow2&apos;/&gt;           //更改file的磁盘文件路径   </span><br><span class="line">      &lt;target dev=&apos;vda&apos; bus=&apos;virtio&apos;/&gt;</span><br><span class="line">      &lt;address type=&apos;pci&apos; domain=&apos;0x0000&apos; bus=&apos;0x00&apos; slot=&apos;0x06&apos; function=&apos;0x0&apos;/&gt;</span><br><span class="line">    &lt;/disk&gt;</span><br></pre></td></tr></table></figure></li><li><p>删除旧虚拟机磁盘文件<br><code>rm -rf /data/images/node2.img</code></p></li></ol><h4 id="快速创建虚拟机"><a href="#快速创建虚拟机" class="headerlink" title="快速创建虚拟机"></a>快速创建虚拟机</h4><ol><li><p>准备硬盘，使用copy on write方式<br><code>qemu-img create -f qcow2 -b oldimg newimg</code></p></li><li><p>修改虚拟机配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">virsh edit oldgues</span><br><span class="line">修改uuid title disk interface 参数</span><br></pre></td></tr></table></figure></li></ol><h4 id="qemu磁盘快照"><a href="#qemu磁盘快照" class="headerlink" title="qemu磁盘快照"></a>qemu磁盘快照</h4><p>qemu最对qcow格式的磁盘文件建立快照</p><ul><li><code>qemu-img snapshot -c 快照名 磁盘名</code>  创建快照</li><li><code>qemu-img snapshot -l 磁盘名</code>  查看磁盘对应的快照</li><li><code>qemu-img snapshot -a 快照名 磁盘名</code> 恢复快照</li><li><code>qemu-img snapshot -d 快照名 磁盘名</code> 删除指定快照</li></ul><h4 id="从命令创建虚拟机"><a href="#从命令创建虚拟机" class="headerlink" title="从命令创建虚拟机"></a>从命令创建虚拟机</h4><p><code>qemu-img create -f qcow2 /data/images/muban.qcow2</code><br><code>virt-install --name vpcname --vcpus=1 --ram=1024 --diks path=/data/images/vpcname.qcow2,format=qcow2 --network netowrk=private1 --pxe</code></p><h3 id="从模板快速创建虚拟机"><a href="#从模板快速创建虚拟机" class="headerlink" title="从模板快速创建虚拟机"></a>从模板快速创建虚拟机</h3><p>最后附上我自己写的脚本，用于从模板快速克隆虚拟机<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 使用此脚本之前需要先创建一个KVM虚拟机，</span></span><br><span class="line"><span class="comment"># 磁盘格式为qcow2。并且把模板虚拟机的xml</span></span><br><span class="line"><span class="comment"># 拷贝到$basedir目录下，命名为base.xml</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"不告诉我虚拟机名字，我给你克隆到哪？"</span></span><br><span class="line"><span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">basedir=/home/mk/kvm_img</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> vmname <span class="keyword">in</span> <span class="variable">$@</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -f <span class="variable">$basedir</span>/<span class="variable">$vmname</span>.qcow2 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"大哥！有这个虚拟机的磁盘文件，我可不给你克隆！"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">vmxml=/tmp/<span class="variable">$vmname</span>.xml</span><br><span class="line">uuid=`uuidgen`</span><br><span class="line"><span class="built_in">let</span> mac=<span class="variable">$RANDOM</span>%100</span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$mac</span> -lt 10 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">mac=<span class="string">"0<span class="variable">$mac</span>"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">cp <span class="variable">$basedir</span>/base.xml <span class="variable">$vmxml</span></span><br><span class="line">qemu-img create -f qcow2 -b <span class="variable">$basedir</span>/base.qcow2 <span class="variable">$basedir</span>/<span class="variable">$vmname</span>.qcow2 &amp;&gt; /dev/null</span><br><span class="line">sed -i <span class="string">"s/&lt;uuid&gt;.*&lt;/&lt;uuid&gt;<span class="variable">$uuid</span>&lt;/"</span>  <span class="variable">$vmxml</span></span><br><span class="line">sed -i <span class="string">"s/base/<span class="variable">$vmname</span>/g"</span> <span class="variable">$vmxml</span></span><br><span class="line">sed -i <span class="string">"s/e7/<span class="variable">$mac</span>/g"</span> <span class="variable">$vmxml</span></span><br><span class="line">virsh define <span class="variable">$vmxml</span></span><br><span class="line"></span><br><span class="line">rm -rf <span class="variable">$vmxml</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>版本控制软件之svn</title>
      <link href="/2018/03/07/svn/"/>
      <content type="html"><![CDATA[<p> SVN作为新一代代码版本管理工具，有很多优点，管理方便，逻辑明确，安全性高，代码一致性高。SVN数据存储有两种方式，BDB（事务安全表类型）和FSFS（一种不需要数据库的存储系统），为了避免在服务器连接中断时锁住数据，FSFS是一种更安全也更多人使用的方式。SVN的运行方式也有两种，一种是独立服务器，另一种是借助apache服务，各有利弊，下面就介绍一下这两种方式各自的部署步骤。</p><hr><p>安装步骤如下：<br><strong>1、安装svn服务</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install subversion</span><br></pre></td></tr></table></figure></p><p><strong>2、创建版本库：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/svn/        <span class="comment">#创建版本库所在文件夹  </span></span><br><span class="line">svnadmin create --fs-type fsfs /opt/svn/p2pweb      <span class="comment">#创建版本库，如果需要使用bdb方式存储，则将fsfs改成bdb即可</span></span><br></pre></td></tr></table></figure></p><p><strong>3、初始化版本库，即导入文件到版本库中（开始没有代码不用导入）：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svn import /root/p2pweb file:///opt/svn/p2pweb --message <span class="string">"初始化版本"</span>     <span class="comment">#将home文件夹的文件导入版本库  </span></span><br><span class="line">svn list --verbose file:///opt/svn/p2pweb  <span class="comment">#查看导入的文件</span></span><br></pre></td></tr></table></figure></p><p><img src="/img/svn/3.png" alt="3"></p><p><strong>4、进入conf目录（该svn版本库配置文件）</strong><br>authz文件是权限控制文件<br>passwd是帐号密码文件<br>svnserve.conf SVN服务配置文件<br>vim passwd   #在[users]块中添加用户和密码，格式：帐号=密码，如name1 = 123456<br><img src="/img/svn/4_1.png" alt="4.1"><br>vim authz  设置权限:  （注意：行后不能有注释内容，例如下图不能有红框内容，会报错的。）<br><img src="/img/svn/4_2.png" alt="4.2"></p><p><strong>5、修改svnserve.conf文件</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi svnserve.conf</span><br><span class="line">打开下面的几个注释：</span><br><span class="line">anon-access = <span class="built_in">read</span> <span class="comment">#匿名用户可读</span></span><br><span class="line">auth-access = write <span class="comment">#授权用户可写</span></span><br><span class="line">password-db = passwd <span class="comment">#使用哪个文件作为账号文件</span></span><br><span class="line">authz-db = authz <span class="comment">#使用哪个文件作为权限文件</span></span><br></pre></td></tr></table></figure></p><p><strong>6、启动svn服务，svn服务默认端口为3690，可以使用<code>netstat -ntlp</code>命令查看服务启动是否成功：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r /opt/svn         <span class="comment"># --listen-port参数修改端口，比如svnserve -d -r /opt/svn --listen-port 81(注：--listen-port中间无隔)</span></span><br></pre></td></tr></table></figure></p><p><strong>7、安装svn客户端，就可以使用客户端通过如下的url就可以访问了：</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn://192.168.192.58/p2pweb</span><br></pre></td></tr></table></figure></p><p><strong>拓展：添加版本库</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create --fs-type fsfs /opt/svn/p2padmin      <span class="comment">#创建版本库，如果需要使用bdb方式存储，则将fsfs改成bdb即可</span></span><br></pre></td></tr></table></figure></p><p>初始化版本库，即导入文件到版本库中：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn import /root/p2padmin file:///opt/svn/p2padmin --message <span class="string">"初始化版本"</span>     <span class="comment">#将home文件夹的文件导入版本库</span></span><br></pre></td></tr></table></figure></p><p>同样需要设置权限<br>无需启动：因为上面已经启动了。<br>客户端验证即可：svn://192.168.192.58/p2padmin    </p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>mysql学习笔记</title>
      <link href="/2018/03/07/mysql/"/>
      <content type="html"><![CDATA[<h2 id="mysql数据库"><a href="#mysql数据库" class="headerlink" title="mysql数据库"></a>mysql数据库</h2><p>MySQL是一种关联数据库管理系统，关联数据库将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。</p><h3 id="mysql数据库安装"><a href="#mysql数据库安装" class="headerlink" title="mysql数据库安装"></a>mysql数据库安装</h3><p>安装mysql数据库，5.6版本开始的数据库，会在<code>~/.mysql_secret</code>生成随机密码<br>使用随机密码串登录mysql后，需要修改<code>root</code>密码才能进行操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /root/.mysql_secret </span><br><span class="line"><span class="comment"># The random password set for the root user at Thu Sep  8 10:35:16 2016 (local time): zUtb3keu</span></span><br><span class="line">mysql -uroot -pzUtb3keu</span><br><span class="line">mysql&gt; <span class="built_in">set</span> password <span class="keyword">for</span> root@<span class="string">"localhost"</span>=password(<span class="string">"123456"</span>);  <span class="comment">#修改root用户的密码</span></span><br></pre></td></tr></table></figure></p><h3 id="mysql数据库存储过程"><a href="#mysql数据库存储过程" class="headerlink" title="mysql数据库存储过程"></a>mysql数据库存储过程</h3><h4 id="mysql库操作"><a href="#mysql库操作" class="headerlink" title="mysql库操作"></a>mysql库操作</h4><p><strong>mysql库名命名规则：</strong> </p><blockquote><ol><li>库名可以使用数字、字母和下划线，但不允许纯纯数字</li><li>库名必须具有唯一性</li><li>库名区分大小写</li><li>库名不能使用特殊字符和sql关键字</li></ol></blockquote><ul><li>查看已有的库 <code>show databases;</code></li><li>创建新库    <code>create database newdata;</code></li><li>切换库    <code>use database newdata;</code></li><li>显示当前所在库 <code>select database();</code></li><li>删除已有库    <code>drop database newdata;</code></li><li>显示当前库已有的表 <code>show tables;</code>   需要进入库才能操作哦</li></ul><h4 id="mysql表操作"><a href="#mysql表操作" class="headerlink" title="mysql表操作"></a>mysql表操作</h4><ul><li><p>新建表<br>  <code>create table 表名(字段1 类型，字段2 类型，字段3 类型);</code></p></li><li><p>查看表中的内容<br>  <code>select 字段1,字段2,字段3 from 表名;</code></p></li></ul><ul><li><p>查看表结构<br>  <code>desc 表名;</code></p></li><li><p>向表中插入数据<br>  <code>insert into 表名 values(字段类表);</code></p></li><li><p>删除表记录<br>  <code>delect * from 表名;</code></p></li><li><p>删除表<br>  <code>drop table 表名;</code></p></li></ul><h4 id="mysql数据类型"><a href="#mysql数据类型" class="headerlink" title="mysql数据类型"></a>mysql数据类型</h4><table><thead><tr><th>关键字</th><th>长度</th><th>范围有符号</th><th>范围无符号</th><th>功能</th></tr></thead><tbody><tr><td>char</td><td>255字节</td><td>*</td><td>*</td><td>字符类型</td></tr><tr><td>varchar</td><td>65532字节</td><td>*</td><td>*</td><td>变长字符</td></tr><tr><td>blob/text</td><td>大于65532</td><td>*</td><td>*</td><td>大文本类型</td></tr><tr><td>tinyint</td><td>1字节</td><td>-128~127</td><td>0~255</td><td>微整型</td></tr><tr><td>smallint</td><td>2字节</td><td>-32768~32767</td><td>0~65535</td><td>小整型</td></tr><tr><td>mediumint</td><td>3字节</td><td>-2^23~2^23-1</td><td>0~2^24-1</td><td>中整型</td></tr><tr><td>int</td><td>4字节</td><td>-2^31~2^31-1</td><td>0~2^32-1</td><td>大整型</td></tr><tr><td>bigint</td><td>8字节</td><td>-2^63~2^63-1</td><td>0~2^64-1</td><td>极大整型</td></tr><tr><td>float</td><td>4字节</td><td>*</td><td>*</td><td>单精度浮点类型</td></tr><tr><td>double</td><td>8字节</td><td>*</td><td>*</td><td>双精度浮点类型</td></tr><tr><td>year</td><td>*</td><td>*</td><td>*</td><td>年(YYYY)</td></tr><tr><td>date</td><td>*</td><td>*</td><td>*</td><td>月日(YYYYMMDD)</td></tr><tr><td>time</td><td>*</td><td>*</td><td>*</td><td>时间(HHMMSS)</td></tr><tr><td>datetime</td><td>*</td><td>*</td><td>*</td><td>年月日时分秒(YYYYMMDDHHMMSS)</td></tr><tr><td>timestamp</td><td>*</td><td>*</td><td>*</td><td>年月日时分秒(YYYYMMDDHHMMSS)</td></tr></tbody></table><p><strong>注：</strong></p><blockquote><p><code>datetime</code>和<code>timestamp</code>类型的区别是，如果不给datetime赋值则默认为null，而如果不给timestamp赋值则使用当前系统时间复制<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table table_time(time1 datetime,time2 timestamp);</span><br><span class="line">mysql&gt; insert into table_time values(now(),now());</span><br><span class="line">mysql&gt; insert into table_time(time1)values(19911205);</span><br><span class="line">mysql&gt; insert into table_time(time2)values(19920206);</span><br><span class="line">mysql&gt; select * from table_time;</span><br><span class="line">+---------------------+---------------------+</span><br><span class="line">| time1               | time2               |</span><br><span class="line">+---------------------+---------------------+</span><br><span class="line">| 2016-09-08 16:45:24 | 2016-09-08 16:45:24 |</span><br><span class="line">| 1991-12-05 00:00:00 | 2016-09-08 16:45:49 |</span><br><span class="line">| NULL                | 1992-02-06 00:00:00 |</span><br><span class="line">+---------------------+---------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="mysql时间函数"><a href="#mysql时间函数" class="headerlink" title="mysql时间函数"></a>mysql时间函数</h4><table><thead><tr><th>函数</th><th>作用</th></tr></thead><tbody><tr><td>now()</td><td>获取当前时间</td></tr><tr><td>year()</td><td>截取给定时间中的年分</td></tr><tr><td>month()</td><td>截取给定时间中的月份</td></tr><tr><td>date()</td><td>截取给定时间中的月日</td></tr><tr><td>day()</td><td>截取给定时间中的日期</td></tr><tr><td>time()</td><td>截取给定时间中的时间</td></tr></tbody></table><h4 id="mysql枚举和列表"><a href="#mysql枚举和列表" class="headerlink" title="mysql枚举和列表"></a>mysql枚举和列表</h4><p>mysql中有两个选择型数据类型:枚举和列表<br>枚举类型只能在给定的值中选择一个，而列表类型可以在给定的值中选择多个。但这两种类型有一个共同点，只能在给定的值中选择。</p><ul><li>枚举 enum()</li><li>列表 set()</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t6(</span><br><span class="line">    -&gt; name char(10),</span><br><span class="line">    -&gt; birthday datetime,</span><br><span class="line">    -&gt; sex enum(&quot;boy&quot;,&quot;girl&quot;,&quot;other&quot;),</span><br><span class="line">    -&gt; likes set(&quot;reading&quot;,&quot;sleeping&quot;,&quot;football&quot;)</span><br><span class="line">    -&gt; );</span><br><span class="line">mysql&gt; desc t6;</span><br><span class="line">+----------+--------------------------------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type                                 | Null | Key | Default | Extra |</span><br><span class="line">+----------+--------------------------------------+------+-----+---------+-------+</span><br><span class="line">| name     | char(10)                             | YES  |     | NULL    |       |</span><br><span class="line">| birthday | datetime                             | YES  |     | NULL    |       |</span><br><span class="line">| sex      | enum(&apos;boy&apos;,&apos;girl&apos;,&apos;other&apos;)           | YES  |     | NULL    |       |</span><br><span class="line">| likes    | set(&apos;reading&apos;,&apos;sleeping&apos;,&apos;football&apos;) | YES  |     | NULL    |       |</span><br><span class="line">+----------+--------------------------------------+------+-----+---------+-------</span><br><span class="line">mysql&gt; insert into t6 values(&quot;mazhen&quot;,now(),&quot;girl&quot;,&quot;sleeping,football&quot;);</span><br><span class="line">mysql&gt; select * from t6;</span><br><span class="line">+--------+---------------------+------+-------------------+</span><br><span class="line">| name   | birthday            | sex  | likes             |</span><br><span class="line">+--------+---------------------+------+-------------------+</span><br><span class="line">| mazhen | 2016-09-08 16:59:56 | girl | sleeping,football |</span><br><span class="line">+--------+---------------------+------+-------------------+</span><br></pre></td></tr></table></figure><h4 id="mysql约束条件"><a href="#mysql约束条件" class="headerlink" title="mysql约束条件"></a>mysql约束条件</h4><p><code>not null</code>  不允许字段为空<br><code>default</code>   给字段设置默认值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t7(</span><br><span class="line">    -&gt; name char(10) not null,</span><br><span class="line">    -&gt; age int(5) not null default 20,</span><br><span class="line">    -&gt; sex enum(&quot;boy&quot;,&quot;girl&quot;,&quot;no&quot;) not null default &quot;boy&quot;</span><br><span class="line">    -&gt; );</span><br><span class="line">mysql&gt; desc t7;</span><br><span class="line">+-------+-------------------------+------+-----+---------+-------+</span><br><span class="line">| Field | Type                    | Null | Key | Default | Extra |</span><br><span class="line">+-------+-------------------------+------+-----+---------+-------+</span><br><span class="line">| name  | char(10)                | NO   |     | NULL    |       |</span><br><span class="line">| age   | int(5)                  | NO   |     | 20      |       |</span><br><span class="line">| sex   | enum(&apos;boy&apos;,&apos;girl&apos;,&apos;no&apos;) | NO   |     | boy     |       |</span><br><span class="line">+-------+-------------------------+------+-----+---------+-------+</span><br><span class="line">mysql&gt; insert into t7(name) value(&quot;mz&quot;);</span><br><span class="line">mysql&gt; select * from t7;</span><br><span class="line">+------+-----+-----+</span><br><span class="line">| name | age | sex |</span><br><span class="line">+------+-----+-----+</span><br><span class="line">| mz   |  20 | boy |</span><br><span class="line">+------+-----+-----+</span><br><span class="line">mysql&gt; insert into t7 values(null,94,girl);</span><br><span class="line">ERROR 1054 (42S22): Unknown column &apos;girl&apos; in &apos;field list&apos;</span><br><span class="line">mysql&gt; insert into t7 values(&quot;ababa&quot;,94,&quot;girl&quot;);</span><br><span class="line">mysql&gt; select * from t7;</span><br><span class="line">+-------+-----+------+</span><br><span class="line">| name  | age | sex  |</span><br><span class="line">+-------+-----+------+</span><br><span class="line">| mz    |  20 | boy  |</span><br><span class="line">| ababa |  94 | girl |</span><br><span class="line">+-------+-----+------+</span><br></pre></td></tr></table></figure><h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><p><code>alter table 表名 执行动作</code></p><ul><li>添加新字段<br><code>alter table 表名 add 字段名 类型(宽度) 约束条件;</code><br>添加新字段的时候可以使用<code>first</code>使添加的新字段在所有字段之前，或者使用<code>after 已有字段名</code>使添加的字段在指定字段之后。</li><li>删除已有字段<br><code>alter table 表名 drop 字段名;</code></li><li>修改字段类型（修改后的类型若与已有数据冲突则不允许修改）<br><code>alter table 表名 modify 字段名 类型(宽度) 约束条件;</code></li><li>修改字段名<br><code>alter table 表名 change 字段名 类型(宽度);</code></li><li>删除字段<br><code>alter table 表名 drop 字段名;</code><br><strong>注：</strong><blockquote><p>alter的操作可以写在一行sql语句。每个动作之前使用<code>,</code>分割</p></blockquote></li></ul><h2 id="mysql索引"><a href="#mysql索引" class="headerlink" title="mysql索引"></a>mysql索引</h2><p>mysql索引的作用，可以加快数据库查询的速度</p><h3 id="mysql索引类型"><a href="#mysql索引类型" class="headerlink" title="mysql索引类型"></a>mysql索引类型</h3><ul><li>普通索引 index</li><li>唯一索引 unqiue</li><li>全文索引 fulltext</li><li>主键     primary key</li><li>外建    foreign key<br>在使用中最常用的索引类型有：<code>index</code>、<code>pirmary key</code>和<code>forgign key</code></li></ul><p>mysql索引有</p><ul><li><code>brtee</code>(二叉数)算法   &lt;—-最常用的算法&gt;</li><li><code>hash</code>算法</li><li><code>b+tree</code>算法</li></ul><h3 id="索引操作"><a href="#索引操作" class="headerlink" title="索引操作"></a>索引操作</h3><ul><li><p>查看索引<br><code>show index from 表名;</code></p></li><li><p>创建索引</p><ul><li>建表时创建索引<br><code>create table 表名(字段列表,index(字段名),index(字段名));</code></li><li>给已有表中的字段设置索引<br><code>create index 索引名 on 表名(字段名);</code></li></ul></li><li>删除索引<br>  <code>drop index 索引名 on 表名;</code></li></ul><h3 id="mysql主键"><a href="#mysql主键" class="headerlink" title="mysql主键"></a>mysql主键</h3><p>在mysql中主键<code>primary key</code>规则</p><blockquote><p>一个表中只能有一个主键<br>主键的值不能为空且不可重复<br>表中如果需要多个字段设置为主键叫复合主键，复合主键必须一起创建字段<br>主键通常和<code>auto_increment</code>连用</p></blockquote><p><strong>注：</strong>创建主键时，单主键可以在字段名后面加<code>primary key</code>关键字约束，而符合主键必须在最后使用<code>primary key(字段1,字段2)</code>创建。</p><ul><li>创建主键<ul><li>创建表时创建主键<br><code>create table 表名(字段表,primary key(字段名));</code><br><code>create table 表名(字段名1 类型 primary key,字段名2 类型,....);</code></li><li>在已有的表中添加主键<br><code>alter table 表名 add primary key(字段名);</code></li></ul></li><li><p>删除主键<br><code>alter table 表名 drop primary key;</code></p></li><li><p>创建复合主键</p><blockquote><p>只要符复主键字段的值不同是重复就可以赋值<br><code>crate table 表名(字段表,primary key(字段1,字段2));</code></p></blockquote></li><li>删除符合主键<blockquote><p>复合主键删除方式和普通主键删除方式一致。只是，删除符合主键，会把所有主键删除。</p></blockquote></li></ul><h3 id="唯一索引unique"><a href="#唯一索引unique" class="headerlink" title="唯一索引unique"></a>唯一索引<code>unique</code></h3><blockquote><p>一个表中可以有多个<code>unique</code>字段，字段值不可以重复但可以赋空值。</p></blockquote><ul><li>创建唯一索引<br><code>crteat table 表名(字段表,unique(字段名1),unique(字段名2));</code></li><li>添加唯一索引<br><code>create unique index 索引名 on 表名(字段名);</code></li><li>删除唯一索引<br><code>alter table 表名 drop index 索引名;</code></li></ul><h3 id="mysql外键"><a href="#mysql外键" class="headerlink" title="mysql外键"></a>mysql外键</h3><p>mysql外键<code>foreign key</code>使用规则</p><blockquote><p>表的存储引擎必须是innodb<br>字段类型必须一致<br>主表的被参考字段必须是索引的一种</p></blockquote><p><strong>外键的作用：</strong></p><blockquote><p>保证数据的一致性</p></blockquote><ul><li><p>创建外键</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">id int primary key,</span><br><span class="line">name varchar(10) not null,</span><br><span class="line">tel char(11) unique,</span><br><span class="line">bm_id int,</span><br><span class="line">index(name),</span><br><span class="line">foregin key(bm_id) referneces 父表(bm_id) on update cascade on delete cascade;</span><br><span class="line">)engine=innodb;</span><br></pre></td></tr></table></figure></li><li><p>删除外键</p><blockquote><p>外键约束的情况下，父表不能被删除，并且父表中被关联的字段也不能删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 drop foregin key 外键名;</span><br></pre></td></tr></table></figure></blockquote></li></ul><h2 id="mysql存储引擎"><a href="#mysql存储引擎" class="headerlink" title="mysql存储引擎"></a>mysql存储引擎</h2><ul><li><p>查看已有表的存储引擎<br><code>show create table 表名;</code></p></li><li><p>设置建表时的存储引擎和字符集</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Create Table: CREATE TABLE tb17 (</span><br><span class="line">  id int(11) NOT NULL,</span><br><span class="line">  name varchar(10) DEFAULT NULL,</span><br><span class="line">  tel char(11) NOT NULL,</span><br><span class="line">  sex enum(&apos;boy&apos;,&apos;girl&apos;) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (id),</span><br><span class="line">  UNIQUE KEY tel (tel),</span><br><span class="line">  index(name)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1</span><br><span class="line">#ENGINE为存储引擎 CHARSET设置字符集</span><br></pre></td></tr></table></figure></li><li><p>修改存储引擎<br><code>alter table 表名 engine=引擎名</code></p></li><li><p>查看mysql支持的存储引擎</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show engines;</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |</span><br><span class="line">| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |</span><br><span class="line">| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |</span><br><span class="line">| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |</span><br><span class="line">| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |</span><br><span class="line">| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |</span><br><span class="line">| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |</span><br><span class="line">| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |</span><br><span class="line">| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |</span><br><span class="line">+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li><li><p>修改mysql默认存储引擎</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br><span class="line"><span class="comment">#在&#123;mysqld&#125;中添加</span></span><br><span class="line">default-storage-engine=存储引擎</span><br></pre></td></tr></table></figure></li></ul><h3 id="mysql存储引擎特点"><a href="#mysql存储引擎特点" class="headerlink" title="mysql存储引擎特点"></a>mysql存储引擎特点</h3><p>在日常工作中，最常用的是<code>myisam</code>和<code>innodb</code>。<br><code>myisam</code>特点:</p><ol><li>独享表空间</li><li>表名.frm用于存储表结构</li><li>表名.myd用于存储表记录</li><li>表名.myi用于存储表索引</li><li>支持表级锁</li></ol><p><code>innodb</code>特点:</p><ol><li>共享表空间</li><li>表名.frm用于存储表结构</li><li>表名.idb用户存储表记录和表索引</li><li>支持行级锁</li></ol>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Linux配置golang-OCI8开发环境</title>
      <link href="/2018/03/06/golang-oci8/"/>
      <content type="html"><![CDATA[<h3 id="OCI环境部署"><a href="#OCI环境部署" class="headerlink" title="OCI环境部署"></a>OCI环境部署</h3><ul><li>将下面3个文件解压并拷贝到<code>/usr/local</code>目录下<br><code>instantclient-basic-linux.x64-12.2.0.1.0.zip</code><br><code>instantclient-sdk-linux.x64-12.2.0.1.0.zip</code><br><code>instantclient-sqlplus-linux.x64-12.2.0.1.0.zip</code><br><a href="https://pan.baidu.com/s/1ggKEksN" target="_blank" rel="noopener">下载地址</a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">unzip -x instantclient-basic-linux.x64-12.2.0.1.0.zip</span><br><span class="line">unzip -x instantclient-sdk-linux.x64-12.2.0.1.0.zip</span><br><span class="line">unzip -x instantclient-sqlplus-linux.x64-12.2.0.1.0.zip</span><br><span class="line">cp instantclient_12_2 /usr/<span class="built_in">local</span>/instantclient</span><br><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/instantclient</span><br><span class="line">ln -s libclntsh.so.12.1 libclntsh.so</span><br><span class="line">```    </span><br><span class="line">- 添加oci的配置</span><br><span class="line">```bash</span><br><span class="line">vim /usr/lib/pkgconfig/oci8.pc</span><br><span class="line"><span class="comment"># 内容如下</span></span><br><span class="line">prefix=/usr/<span class="built_in">local</span>/instantclient</span><br><span class="line">exec_prefix=<span class="variable">$&#123;prefix&#125;</span></span><br><span class="line">libdir=<span class="variable">$&#123;prefix&#125;</span></span><br><span class="line">includedir=<span class="variable">$&#123;prefix&#125;</span>/sdk/include</span><br><span class="line">glib_genmarshal=glib-genmarshal</span><br><span class="line">gobject_query=gobject-query</span><br><span class="line">glib_mkenums=glib-mkenums</span><br><span class="line">Name: oci8</span><br><span class="line">Description: oci8 library</span><br><span class="line">Libs: -L<span class="variable">$&#123;libdir&#125;</span> -lclntsh</span><br><span class="line">Cflags: -I<span class="variable">$&#123;includedir&#125;</span></span><br><span class="line">Version: 12.2</span><br><span class="line"><span class="comment"># 再将环境变量写入profile</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PKG_CONFIG_PATH=/user/lib/pkgconfig'</span> &gt;&gt;/etc/profile</span><br></pre></td></tr></table></figure></li></ul><p>测试oci安装成功<br><code>pkg-config --list-all | grep oci8</code></p><ul><li>配置客户端环境变量<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bash_profile</span><br><span class="line"><span class="comment"># 内容如下</span></span><br><span class="line"><span class="built_in">export</span> ora_home=/usr/<span class="built_in">local</span>/instantclient</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$ora_home</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ora_home</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="安装go-oci8包"><a href="#安装go-oci8包" class="headerlink" title="安装go-oci8包"></a>安装go-oci8包</h3><p><code>go get github.com/mattn/go-oci8</code></p>]]></content>
      
      <categories>
          
          <category> golang </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>LVM常用命令</title>
      <link href="/2016/07/08/LVM/"/>
      <content type="html"><![CDATA[<h3 id="LVM逻辑卷"><a href="#LVM逻辑卷" class="headerlink" title="LVM逻辑卷"></a>LVM逻辑卷</h3><blockquote><p>将多个物理分区/磁盘从逻辑组合成一个更大到整体，其中划分出不同到逻辑分区，逻辑分区到大小可以根据需要扩大、缩小</p></blockquote><p><strong>逻辑卷作用</strong></p><ul><li>整合容量小磁盘</li><li>动态伸缩磁盘容量</li></ul><p><strong>LVM逻辑卷简称</strong></p><ul><li>pv 物理卷</li><li>VG 卷组</li><li>LV    逻辑卷</li></ul><p>LVM逻辑卷操作<br><code>parted /dev/vda</code>  #对GPT分区操作<br><code>mktable gpt</code>  #更改分区表为GPT<br><code>mkpar</code>   #创建分区<br><code>pvscan</code>  #搜索物理卷<br><code>pvcreate</code>  #创建LVM物理卷<br><code>vgcreate</code> #创建LVM卷组</p><blockquote><p>vgcreate vgname pvname…<br><code>vgs</code> #扫描LVM卷组</p></blockquote><h4 id="扩展LVM卷组"><a href="#扩展LVM卷组" class="headerlink" title="扩展LVM卷组"></a>扩展LVM卷组</h4><ul><li>创建分区<br><code>parted /dev/vda mkpart lvm3 ext4 20G 40G</code></li><li>刷新分区表<br><code>partx -a /dev/vda</code></li><li>添加分区到卷组<br><code>vgextend vgname /dev/vda3</code></li></ul><h4 id="创建LVM逻辑卷"><a href="#创建LVM逻辑卷" class="headerlink" title="创建LVM逻辑卷"></a>创建LVM逻辑卷</h4><p><code>lvcreate</code> #创建LVM逻辑卷</p><blockquote><p>lvcreate -L size -n name vgname #其中-L指定逻辑卷大小，-n指定逻辑卷名字，vgname为卷组名称</p></blockquote><h4 id="扩展LVM逻辑卷"><a href="#扩展LVM逻辑卷" class="headerlink" title="扩展LVM逻辑卷"></a>扩展LVM逻辑卷</h4><ul><li>增加逻辑卷大小<br><code>lvextend -L size /dev/vgname/lvname</code> #-L指定逻辑卷大小或者增加的大小</li><li>刷新文件系统<br><code>resize2fs /dev/vgname/lvname</code>  #刷新文件系统</li></ul><h4 id="删除逻辑卷"><a href="#删除逻辑卷" class="headerlink" title="删除逻辑卷"></a>删除逻辑卷</h4><p><code>lvremove /dev/vgname/lvname</code></p><h4 id="删除卷组"><a href="#删除卷组" class="headerlink" title="删除卷组"></a>删除卷组</h4><p><code>vgremove vgname</code></p><h4 id="删除物理卷"><a href="#删除物理卷" class="headerlink" title="删除物理卷"></a>删除物理卷</h4><p><code>pvremove /dev/pvname</code></p><h4 id="PE修改"><a href="#PE修改" class="headerlink" title="PE修改"></a>PE修改</h4><p><code>vgchange -s 1M myvg</code> -&gt; 修改PE大小为1M</p><blockquote><p>RHCE考题： 创建一个250M的辑卷<br>默认逻辑卷为4M，新建逻辑卷，会有少量多出<br>解题：<br><code>vgchange -s 1M vgname</code><br><code>lvcreate -L 250M -n lvname vgname</code></p></blockquote>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
    </entry>
    
  
  
</search>
